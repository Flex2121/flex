<!DOCTYPE html>
<html lang="cs">

<head>
    <meta charset="UTF-8">
    <title>Debug App Sequential</title>
</head>

<body>
    <h1>Debug App JS Sequential</h1>
    <div id="status">Starting...</div>
    <script>
        window.onerror = function (message, source, lineno, colno, error) {
            document.getElementById('status').innerHTML += '<br><span style="color:red">Error: ' + message + ' at ' + lineno + ':' + colno + '</span>';
            console.error(message, source, lineno, colno, error);
            return false;
        };

        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = () => resolve(src);
                script.onerror = () => reject(src);
                document.body.appendChild(script);
            });
        }

        async function runTests() {
            // Test Terms
            try {
                await loadScript('js/terms.js');
                document.getElementById('status').innerHTML += '<br>terms.js loaded.';
                if (typeof TermSystem !== 'undefined') {
                    document.getElementById('status').innerHTML += '<br><span style="color:green">TermSystem defined.</span>';
                } else {
                    document.getElementById('status').innerHTML += '<br><span style="color:red">TermSystem NOT defined.</span>';
                }
            } catch (e) {
                document.getElementById('status').innerHTML += '<br><span style="color:red">Failed to load terms.js</span>';
            }

            // Test Data
            try {
                await loadScript('js/data.js');
                document.getElementById('status').innerHTML += '<br>data.js loaded.';
                if (typeof window.studyData !== 'undefined') {
                    document.getElementById('status').innerHTML += '<br><span style="color:green">window.studyData defined.</span>';
                } else {
                    document.getElementById('status').innerHTML += '<br><span style="color:red">window.studyData NOT defined.</span>';
                }
            } catch (e) {
                document.getElementById('status').innerHTML += '<br><span style="color:red">Failed to load data.js</span>';
            }

            // Test App
            try {
                await loadScript('js/app.js');
                document.getElementById('status').innerHTML += '<br>app.js loaded.';
                if (typeof Gamification !== 'undefined') {
                    document.getElementById('status').innerHTML += '<br><span style="color:green">Gamification defined.</span>';
                } else {
                    document.getElementById('status').innerHTML += '<br><span style="color:red">Gamification NOT defined (Runtime error likely).</span>';
                }
            } catch (e) {
                document.getElementById('status').innerHTML += '<br><span style="color:red">Failed to load app.js</span>';
            }
        }

        runTests();
    </script>
</body>

</html>